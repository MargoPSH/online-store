"use strict";var _createClass=function(){function n(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,e){return a&&n(t.prototype,a),e&&n(t,e),t}}();function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var Cart=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"json/cart.json",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"#basket";_classCallCheck(this,e),this.source=t,this.container=a,this.countGoods=0,this.amount=0,this.basketItems=[],this._init(t)}return _createClass(e,[{key:"_render",value:function(){var t=$("<div/>",{class:"cart-content"}),a=$("<div/>",{class:"total"}),e=$("<form/>",{action:"#",class:"cart-btn"});e.append("<button>checkout</button>"),e.append("<button>go to cart</button>"),t.append(a),t.append(e),$(this.container).append(t),$("<span>TOTAL</span>").appendTo(a),$('<span class="total-sum"></span>').appendTo(a)}},{key:"_init",value:function(t){var s=this;this._render(),fetch(t).then(function(t){return t.json()}).then(function(t){var a=!0,e=!1,n=void 0;try{for(var r,i=t.contents[Symbol.iterator]();!(a=(r=i.next()).done);a=!0){var o=r.value;s.basketItems.push(o),s._renderItem(o)}}catch(t){e=!0,n=t}finally{try{!a&&i.return&&i.return()}finally{if(e)throw n}}s.countGoods=t.countGoods,s.amount=t.amount,s._renderSum()})}},{key:"_renderItem",value:function(a){var e=this,t=$("<div/>",{class:"position"}),n=$("<a/>",{href:"#","data-product":a.id_product}),r=$("<div/>",{class:"foto"}),i=$("<img>",{src:a.img,alt:a.name_product}),o=$("<div/>",{class:"foto-text"}),s=$("<p/>",{text:a.name_product}),c=$("<div/>",{class:"stars-fa-fw"}),u=$("<div/>",{class:"cross"});c.append('<i class="fa fa-star fa-fw" aria-hidden="true"></i>\n        <i class="fa fa-star fa-fw" aria-hidden="true"></i>\n        <i class="fa fa-star fa-fw" aria-hidden="true"></i>\n        <i class="fa fa-star fa-fw" aria-hidden="true"></i>\n        <i class="fa fa-star fa-fw" aria-hidden="true"></i>'),o.append(s),o.append(c),o.append("<span>"+a.quantity+" x $"+a.price+"</span>"),r.append(i),n.append(r),n.append(o),t.append(n),u.append('<i class="fa fa-times" aria-hidden="true"></i>'),t.append(u),u.on("click",function(t){e._removePosition(a.id_product)}),$(".cart-content").prepend(t)}},{key:"_renderSum",value:function(){$(".total-sum").text("$"+this.amount+".00"),$(".countGoods").text(""+this.countGoods)}},{key:"addToCartProduct",value:function(t){var a=+$(t).data("id"),e=this.basketItems.find(function(t){return t.id_product===a});if(e)e.quantity++,this.countGoods++,this.amount+=e.price,this._updateCart(e);else{var n={id_product:a,name_product:$(t).data("name"),img:$(t).data("img"),price:$(t).data("price"),quantity:1};this.basketItems.push(n),this.countGoods+=n.quantity,this.amount+=n.price,this._renderItem(n)}this._renderSum()}},{key:"_updateCart",value:function(t){$('a[data-product="'+t.id_product+'"]').find(".foto-text span").text(t.quantity+" x $"+t.price)}},{key:"_removePosition",value:function(a){var t=this.basketItems.find(function(t){return t.id_product===a});this.amount-=t.quantity*t.price,this.countGoods-=t.quantity;var e=$('a[data-product="'+a+'"]');this.basketItems.splice(this.basketItems.indexOf(t),1),e.parent().remove(),this._renderSum()}}]),e}();_createClass=function(){function n(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,e){return a&&n(t.prototype,a),e&&n(t,e),t}}();function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var Featured=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".featured";_classCallCheck(this,a),this.container=t,this.source="json/products.json",this._init(this.source)}return _createClass(a,[{key:"_init",value:function(t){var s=this;fetch(t).then(function(t){return t.json()}).then(function(t){var a=!0,e=!1,n=void 0;try{for(var r,i=t.products[Symbol.iterator]();!(a=(r=i.next()).done);a=!0){var o=r.value;s._renderFeaturedItems(o)}}catch(t){e=!0,n=t}finally{try{!a&&i.return&&i.return()}finally{if(e)throw n}}})}},{key:"_renderFeaturedItems",value:function(t){var a=$("<div/>",{class:"featured__item"}),e=$("<button/>",{class:"cart-now",text:"Add to cart","data-id":t.id_product,"data-name":t.name_product,"data-img":t.src,"data-price":t.price});$("<img>",{src:"img/curt-now.png",alt:"cart-now"}).prependTo(e);var n=$("<img>",{src:t.src,class:t.class,alt:t.alt});a.append(e),a.append(n),a.append($("<p/>",{text:t.name_product})),a.append($("<p><span>$ "+t.price+".00</span></p>")),a.appendTo($(this.container))}}]),a}();!function(e){e(function(){new Featured;var a=new Cart;e(".featured").on("click",".cart-now",function(t){a.addToCartProduct(t.target)}),e(".container__tabs_control").on("click","button:not(.active)",function(t){t.preventDefault(),e(t.target).closest(".container__tabs_control").find(".active").removeClass("active"),e(t.target).addClass("active").closest(".container__tabs").find(".text").hide(),e(e(t.target).find("a").attr("href")).fadeIn(500)})})}(jQuery);
//# sourceMappingURL=main.min.js.map
