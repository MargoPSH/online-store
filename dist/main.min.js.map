{"version":3,"sources":["Cart.js","Featured.js","main.js"],"names":["Cart","source","arguments","length","undefined","container","_classCallCheck","this","countGoods","amount","basketItems","_init","$cartContentDiv","$","class","$cartTotal","$cartBtnForm","action","append","appendTo","_this","_render","fetch","then","result","json","data","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","contents","Symbol","iterator","next","done","product","value","push","_renderItem","err","return","_renderSum","_this2","$position","$hrefProduct","href","data-product","id_product","$fotoDiv","$imgFotoDiv","src","img","alt","name_product","$fotoTextDiv","$nameFoto","text","$starsDiv","$crossDiv","quantity","price","on","event","_removePosition","prepend","elem","idProduct","find","_updateCart","splice","indexOf","parent","remove","Featured","products","item","_renderFeaturedItems","$featuredItem","$btnCartNow","data-id","data-name","data-img","data-price","prependTo","$featuredItemImg","mycart","e","addToCartProduct","target","preventDefault","closest","removeClass","hide","attr","fadeIn","jQuery"],"mappings":"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","file":"main.min.js","sourcesContent":["class Cart {\r\n    constructor(source = 'json/cart.json', container = '#basket') {\r\n        this.source = source;\r\n        this.container = container;\r\n        this.countGoods = 0;\r\n        this.amount = 0;\r\n        this.basketItems = [];\r\n        this._init(source);\r\n    }\r\n\r\n    _render() {\r\n        let $cartContentDiv = $('<div/>', {\r\n            class: 'cart-content'\r\n        });        \r\n        let $cartTotal = $('<div/>', {\r\n            class: 'total'\r\n        });\r\n        let $cartBtnForm = $('<form/>', {\r\n            action: '#',\r\n            class: 'cart-btn'\r\n        });\r\n        $cartBtnForm.append('<button>checkout</button>');\r\n        $cartBtnForm.append('<button>go to cart</button>');\r\n        $cartContentDiv.append($cartTotal);\r\n        $cartContentDiv.append($cartBtnForm);\r\n        $(this.container).append($cartContentDiv);\r\n        $('<span>TOTAL</span>').appendTo($cartTotal);\r\n        $('<span class=\"total-sum\"></span>').appendTo($cartTotal);\r\n    }\r\n\r\n    _init(source) {\r\n        this._render();\r\n        fetch(source)\r\n        .then(result => result.json())\r\n        .then(data => {\r\n            for(let product of data.contents) {\r\n                this.basketItems.push(product);\r\n                this._renderItem(product);\r\n            }\r\n            this.countGoods = data.countGoods;\r\n            this.amount = data.amount;\r\n            this._renderSum();\r\n        });\r\n    }\r\n\r\n    _renderItem(product) {\r\n        let $position = $('<div/>', {\r\n            class: 'position'\r\n        });\r\n        let $hrefProduct = $('<a/>', {\r\n            href: '#',\r\n            'data-product': product.id_product\r\n        });\r\n        let $fotoDiv = $('<div/>', {\r\n            class: 'foto'\r\n        });\r\n        let $imgFotoDiv = $('<img>', {\r\n            src: product.img,\r\n            alt: product.name_product\r\n        });\r\n        let $fotoTextDiv = $('<div/>', {\r\n            class: 'foto-text'\r\n        });\r\n        let $nameFoto = $('<p/>', {\r\n            text: product.name_product\r\n        });\r\n        let $starsDiv = $('<div/>', {\r\n            class: 'stars-fa-fw'\r\n        });\r\n        let $crossDiv = $(`<div/>`, {\r\n            class: 'cross'\r\n        });\r\n        \r\n        $starsDiv.append(`<i class=\"fa fa-star fa-fw\" aria-hidden=\"true\"></i>\r\n        <i class=\"fa fa-star fa-fw\" aria-hidden=\"true\"></i>\r\n        <i class=\"fa fa-star fa-fw\" aria-hidden=\"true\"></i>\r\n        <i class=\"fa fa-star fa-fw\" aria-hidden=\"true\"></i>\r\n        <i class=\"fa fa-star fa-fw\" aria-hidden=\"true\"></i>`);\r\n        $fotoTextDiv.append($nameFoto);\r\n        $fotoTextDiv.append($starsDiv);\r\n        $fotoTextDiv.append(`<span>${product.quantity} x $${product.price}</span>`);\r\n        $fotoDiv.append($imgFotoDiv);\r\n        $hrefProduct.append($fotoDiv);\r\n        $hrefProduct.append($fotoTextDiv);\r\n        $position.append($hrefProduct);  \r\n        $crossDiv.append('<i class=\"fa fa-times\" aria-hidden=\"true\"></i>');\r\n        $position.append($crossDiv);\r\n        $crossDiv.on('click', event => {\r\n            this._removePosition(product.id_product);\r\n        });\r\n        $('.cart-content').prepend($position);\r\n    }\r\n    \r\n    _renderSum() {\r\n        $('.total-sum').text(`$${this.amount}.00`);\r\n        $('.countGoods').text(`${this.countGoods}`);\r\n    }\r\n\r\n    addToCartProduct(elem) {\r\n        let idProduct = +$(elem).data('id');\r\n        let find = this.basketItems.find(product => product.id_product === idProduct);\r\n        if(find) {\r\n            find.quantity++;\r\n            this.countGoods++;\r\n            this.amount += find.price;\r\n            this._updateCart(find);\r\n        } else {\r\n            let product = {\r\n                id_product: idProduct,\r\n                name_product: $(elem).data('name'),\r\n                img: $(elem).data('img'),\r\n                price: $(elem).data('price'),\r\n                quantity: 1\r\n            };\r\n            this.basketItems.push(product);\r\n            this.countGoods += product.quantity;\r\n            this.amount += product.price;\r\n            this._renderItem(product);\r\n        }\r\n        this._renderSum();        \r\n    }\r\n\r\n    _updateCart(product) {\r\n        let $position = $(`a[data-product=\"${product.id_product}\"]`);\r\n        $position.find('.foto-text span').text(`${product.quantity} x $${product.price}`);\r\n    }\r\n\r\n    _removePosition(idProduct) {\r\n        let find = this.basketItems.find(product => product.id_product === idProduct);\r\n        this.amount -= find.quantity * find.price;\r\n        this.countGoods -= find.quantity;\r\n        let $position = $(`a[data-product=\"${idProduct}\"]`);\r\n        this.basketItems.splice(this.basketItems.indexOf(find), 1);\r\n        $position.parent().remove();\r\n        this._renderSum();\r\n    }\r\n}","class Featured {\r\n    constructor(container = \".featured\") {\r\n        this.container = container;\r\n        this.source = 'json/products.json';\r\n        this._init(this.source);\r\n    }\r\n\r\n    _init(source) {\r\n        fetch(source)\r\n        .then(result => result.json())\r\n        .then(data => {\r\n            for (let item of data.products) {\r\n                this._renderFeaturedItems(item);\r\n            }\r\n        });\r\n    }\r\n    _renderFeaturedItems(item) {\r\n        let $featuredItem = $('<div/>', {\r\n            class: 'featured__item',\r\n        });\r\n        let $btnCartNow = $('<button/>', {\r\n            class: 'cart-now',\r\n            text: 'Add to cart',\r\n            'data-id': item.id_product,\r\n            'data-name': item.name_product,\r\n            'data-img': item.src,\r\n            'data-price': item.price,\r\n        });\r\n        let $imgBtn = $('<img>', {\r\n            src: 'img/curt-now.png',\r\n            alt: 'cart-now',\r\n        });\r\n        $imgBtn.prependTo($btnCartNow);\r\n\r\n        let $featuredItemImg = $('<img>', {\r\n            src: item.src,\r\n            class: item.class,\r\n            alt: item.alt,\r\n        });\r\n        $featuredItem.append($btnCartNow);\r\n        $featuredItem.append($featuredItemImg);\r\n        $featuredItem.append($('<p/>', {\r\n            text: item.name_product,\r\n        }));\r\n        $featuredItem.append($(`<p><span>$ ${item.price}.00</span></p>`));\r\n        $featuredItem.appendTo($(this.container));        \r\n    }\r\n}\r\n","'use strict';\r\n\r\n(function($) {\r\n    $(function() {\r\n        let products = new Featured();\r\n        let mycart = new Cart();\r\n\r\n        $('.featured').on('click', '.cart-now', e => {\r\n            mycart.addToCartProduct(e.target);\r\n        });\r\n        \r\n        $('.container__tabs_control').on('click', 'button:not(.active)', event => {\r\n            event.preventDefault();\r\n            $(event.target).closest('.container__tabs_control').find('.active').removeClass('active');\r\n            $(event.target).addClass('active').closest('.container__tabs').find('.text').hide();\r\n            $($(event.target).find('a').attr('href')).fadeIn(500);\r\n        })\r\n    })\r\n})(jQuery);"]}